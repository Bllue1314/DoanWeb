<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán - Ộ i i Gaming Store</title>
    <!-- CSS Chung -->
    <link rel="stylesheet" href="../Assets/Css/navi.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../Assets/Css/login.css">
    <link rel="stylesheet" href="../Assets/Css/cart.css">
    <link rel="stylesheet" href="../Assets/Css/checkout.css">

</head>

<body>
    <nav>
        <a href="javascript:history.back()" id="navBackButton" class="nav-back-button" style="display: flex;">
            <i class="fas fa-arrow-left"></i>
        </a>

        <div class="logo">
            <img src="../Assets/img/conchobopc.png">
        </div>
        <ul class="nav-links">
            <li><a href="../Pages/index.html">Home</a></li>
        </ul>
        <div class="btns">
            <a href="../Pages/cart.html" class="cart-icon" id="cartIcon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </a>
            <div id="logBtn">
                <button class="btn-login" id="showLogin" onclick="showForm('login')">Đăng Nhập</button>
                <button class="btn-login" id="showRegister" onclick="showForm('register')">Đăng Ký</button>
            </div>
            <div class="userName" id="userSection">
                <button id="userName" class="userBtn"></button>
                <div id="userMenu" class="user-Menu">
                    <button onclick="viewProfile()">Xem thông tin</button>
                    <button onclick="logout()">Đăng xuất</button>
                </div>
            </div>
        </div>
        <div class="menu-btn" id="menuBtn">☰</div>
    </nav>

    <div id="containerLogin">
        <div class="login" id="loginForm">
            <form onsubmit="handleLogin(event)">
                <h1>Đăng Nhập</h1>
                <div class="input-box">
                    <input type="text" required>
                    <div class="labelline">Tên đăng nhập</div>
                </div>
                <div class="input-box">
                    <input type="password" required>
                    <div class="labelline">Mật khẩu</div>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox">Ghi nhớ tài khoản</label>
                    <a href="#" onclick="switchForm(event, 'forgetpw')">Quên mật khẩu?</a>
                </div>
                <button type="submit" class="btn">Đăng Nhập</button>
                <div class="register-link">
                    <p>Không có tài khoản?
                        <a href="#" onclick="switchForm(event, 'register')">Đăng ký</a>
                    </p>
                </div>
            </form>
        </div>
        <div class="login" id="registerForm">
            <form onsubmit="handleRegister(event)">
                <h1>Đăng Ký</h1>
                <div class="input-box">
                    <input type="text" required>
                    <div class="labelline">Tên đăng nhập</div>
                </div>
                <div class="input-box">
                    <input type="password" required>
                    <div class="labelline">Mật khẩu</div>
                </div>
                <div class="input-box">
                    <input type="password" required>
                    <div class="labelline">Nhập lại mật khẩu</div>
                </div>
                <div class="input-box">
                    <input type="email" required id="email">
                    <div class="labelline">Email</div>
                </div>
                <div class="input-box">
                    <input type="number" required>
                    <div class="labelline">Số điện thoại</div>
                </div>
                <button type="submit" class="btn">Tạo tài khoản</button>
                <div class="register-link">
                    <p>Đã có tài khoản?
                        <a href="#" onclick="switchForm(event, 'login')">Đăng nhập</a>
                    </p>
                </div>
            </form>
        </div>
        <div class="login" id="forgetpwForm">
            <form onsubmit="handleForgetpw(event)">
                <h1>Nhập email</h1>
                <div class="input-box">
                    <input type="email" required>
                    <div class="labelline">Email</div>
                </div>
                <button type="submit" class="btn">Get password</button>
                <div class="register-link">
                    <p>Không có tài khoản?
                        <a href="#" onclick="switchForm(event, 'register')">Đăng ký</a>
                    </p>
                </div>
            </form>
        </div>
    </div>


    <!-- NỘI DUNG TRANG THANH TOÁN (ĐÃ CẬP NHẬT) -->
    <div class="checkout-page">
        <!-- Cột bên trái: Form thông tin -->
        <div class="checkout-details">
            <form id="paymentForm">
                <div class="checkout-card">
                    <h3 class="card-title">Thông tin giao hàng</h3>
                    <div class="form-group">
                        <input type="text" id="fullName" name="fullName" placeholder="Nhập họ và tên" required>
                    </div>
                    <div class="form-group with-icon">
                        <input type="tel" id="phone" name="phone" placeholder="Nhập số điện thoại" required>
                        <span class="required-star">*</span>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email1" name="email" placeholder="Nhập email">
                    </div>
                    <div class="form-group">
                        <input type="text" id="address" name="address" placeholder="Địa chỉ, tên đường" required>
                    </div>
                </div>

                <!-- Phương thức giao hàng -->
                <div class="checkout-card">
                    <h3 class="card-title">Phương thức giao hàng</h3>
                    <div class="form-group">
                        <input type="text" value="Nhập địa chỉ để xem các phương thức giao hàng" disabled>
                    </div>
                </div>

                <!-- Phương thức thanh toán -->
                <div class="checkout-card">
                    <h3 class="card-title">Phương thức thanh toán</h3>

                    <div class="payment-option selected">
                        <input type="radio" name="paymentMethod" value="cod" checked id="cod">
                        <label for="cod">
                            <i class="fas fa-truck"></i>
                            <span>Thanh toán khi nhận hàng (COD)</span>
                        </label>
                    </div>

                    <div class="payment-option">
                        <input type="radio" name="paymentMethod" value="ewallet" id="ewallet">
                        <label for="ewallet">
                            <i class="fas fa-wallet"></i>
                            <span>Ví điện tử (Momo, ZaloPay, ...)</span>
                        </label>
                    </div>

                    <div class="payment-option">
                        <input type="radio" name="paymentMethod" value="creditcard" id="creditcard">
                        <label for="creditcard">
                            <i class="fas fa-credit-card"></i>
                            <span>Thẻ tín dụng/Ghi nợ</span>
                        </label>
                    </div>
                </div>

                <!-- Ghi chú -->
                <div class="checkout-card">
                    <div class="form-group">
                        <textarea id="notes" name="notes" placeholder="Ghi chú đơn hàng"></textarea>
                    </div>
                </div>
            </form>
        </div>

        <!-- Cột bên phải: Tóm tắt giỏ hàng -->
        <div class="checkout-summary-column">

            <!-- Giỏ hàng -->
            <div class="checkout-card cart-summary">
                <h3 class="card-title">Giỏ hàng</h3>
                <div id="summaryItemsList" class="summary-items">
                    <!-- JS sẽ chèn sản phẩm vào đây -->
                    <p>Đang tải giỏ hàng...</p>
                </div>
            </div>

            <!-- Tóm tắt đơn hàng (ĐÃ XÓA MÃ KHUYẾN MÃI) -->
            <div class="checkout-card order-total">
                <h3 class="card-title">Tóm tắt đơn hàng</h3>
                <div class="summary-total-details">
                    <div class="total-line">
                        <span>Tạm tính</span>
                        <span id="summarySubtotal">0đ</span>
                    </div>
                    <div class="total-line">
                        <span>Phí vận chuyển</span>
                        <span>-</span>
                    </div>
                    <div class="total-line final-total">
                        <span>Tổng thanh toán</span>
                        <span id="summaryTotal">0đ</span>
                    </div>
                </div>

                <!-- Nút đặt hàng (đã di chuyển) -->
                <button type="submit" form="paymentForm" class="btn-submit-order">Đặt hàng</button>
            </div>

        </div>
    </div>
     <div id="profilePopup" class="popupProfile">
        <div class="popup-content">
            <h2>Thông tin tài khoản</h2>
            <form id="profileForm" onsubmit="saveProfile(event)">
                <label>Tên đăng nhập</label>
                <input type="text" id="profileUsername" required>

                <label>Email</label>
                <input type="email" id="profileEmail" required readonly>
                
                <label>Địa chỉ</label>
                <input type="text" id="address">

                <label>Mật khẩu mới (tùy chọn)</label>
                <input type="password" id="profileNewPassword">

                <label>Mật khẩu hiện tại</label>
                <input type="password" id="profileCurrentPassword" required>

                <div class="form-actions">
                    <button type="submit">Lưu</button>
                    <button type="button" onclick="closeProfile()">Đóng</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts Chung -->
    <script src="../src/Components/cart-manager.js"></script>
    <script src="../src/Components/log.js"></script>
    <script src="../src/Components/checkout.js"></script>
    <script src="../src/Components/cart-display.js"></script>
</body>

</html>